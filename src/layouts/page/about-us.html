{{ define "main" }}
{{ $underline := resources.Get "/illustrations/underline.svg" }}
{{ $heroAbout := resources.Get "/illustrations/hero-about-1.svg" }}
{{ $circles := resources.Get "/illustrations/circles.svg" }}
{{ $arrow := resources.Get "/illustrations/arrow.svg" }}
{{ $dashline := resources.Get "/illustrations/dash-line.svg" }}
{{ $line6 := resources.Get "/illustrations/line-6.svg" }}
{{ $line7 := resources.Get "/illustrations/line-7.svg" }}
{{ $eclipse := resources.Get "/illustrations/eclipse.svg" }}
{{ $adoptOpenJDK := resources.Get "/illustrations/adoptOpenJDK.svg" }}
{{ $adoptium := resources.Get "/illustrations/adoptium.svg" }}
{{ $adopt := resources.Get "/illustrations/adoptJDK.svg" }}
{{ $jakarta := resources.Get "/illustrations/jakarta.svg" }}
{{ $ospo := resources.Get "/illustrations/ospo.svg" }}
{{ $java := resources.Get "/illustrations/java.svg" }}
{{ $wiki := resources.Get "/illustrations/wiki.svg" }}
{{ $opensource := resources.Get "/illustrations/opensource.svg" }}
{{ $javaland := resources.Get "/illustrations/javaland.svg" }}
{{ $itclub := resources.Get "/illustrations/itclub.svg" }}
{{ $longline := resources.Get "/illustrations/longline.svg" }}
{{ $swirlds := resources.Get "/illustrations/swirlds.svg" }}
{{ $longline := resources.Get "/illustrations/longline.svg" }}
{{ $hedera := resources.Get "/illustrations/hedera.svg" }}
{{ $heise := resources.Get "/illustrations/heise.svg" }}
{{ $arrow22 := resources.Get "/illustrations/arrow22.svg" }}
{{ $dashlineM := resources.Get "/illustrations/dashline-m.svg" }}
{{ $lineM := resources.Get "/illustrations/lineM.svg" }}
{{ $lineM2 := resources.Get "/illustrations/lineM2.svg" }}
{{ $click := resources.Get "/illustrations/click.svg" }}
{{ $dashlineM2 := resources.Get "/illustrations/dashlineM.svg" }}
{{ $teamPlaceholder := resources.Get "/illustrations/team-placeholder.svg" }}
{{ $hendrik := resources.Get "/images/hendrik.jpg" }}
{{ $circles2 := resources.Get "/illustrations/circles-2.svg" }}
{{ $star := resources.Get "/illustrations/star.svg" }}
{{ $line := resources.Get "/illustrations/line-7.svg" }}
{{ $line2 := resources.Get "/illustrations/line-6.svg" }}
{{ $sbCircle := resources.Get "/illustrations/sb-circle-2.svg" }}
{{ $circle55 := resources.Get "/illustrations/circle-55.svg" }}

<div class="">
    <div class="flow-root relative pb-20 sm:pb-36 container">
        <img class="top-20 right-0 absolute size-40 shrink-0" alt="" src="{{ $circles2.RelPermalink }}" />
        <img class="top-[20%] left-52 absolute size-20 shrink-0" alt="" src="{{ $star.RelPermalink }}" />
        <img class="top-[32%] left-12 absolute size-20 shrink-0" alt="" src="{{ $line.RelPermalink }}" />
        <img class="top-[39%] -left-6 absolute size-72 shrink-0" alt="" src="{{ $sbCircle.RelPermalink }}" />
        <img class="top-[55%] left-12 absolute size-20 shrink-0" alt="" src="{{ $line2.RelPermalink }}" />
        <img class="top-[65%] left-0 absolute size-56 shrink-0" alt="" src="{{ $circle55.RelPermalink }}" />


        
        <div class="relative flex md:flex-row flex-col gap-24 pt-60 sm:pt-64 lg:pt-72 pb-16 w-full">
            <div class="relative w-full md:w-[325px] md:shrink-0" x-data="observerSection()" x-init="initObserver()">
                <div class="top-20 sticky -mt-36">
                    <div class="mb-16">
                        <div class="relative flex justify-center sm:justify-start items-center sm:items-start text-left">
                            <h1 class="text-center h1">{{.Params.title}}</h1>
                            <img src="{{ $underline.RelPermalink }}" alt="{{ i18n " altTexts.underline" }}"  class="-bottom-3 absolute sm:-mr-24 w-48 lg:w-72 shrink-0">
                        </div>
                    </div>
                    
                    <div class="flex flex-col gap-6 bg-white shadow-5 px-7 py-8 rounded-[28px]" :class="open ? 'w-full ' : 'w-24'" x-data="{open: window.innerWidth >= 768}"    x-init="window.addEventListener('resize', () => open = window.innerWidth >= 768)">
                        <button @click="open =!open" type="button" class="md:hidden">
                            <svg width="38" height="21" viewBox="0 0 38 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <rect width="38" height="3" fill="#469F85"/>
                                <rect y="9" width="38" height="3" fill="#469F85"/>
                                <rect y="18" width="38" height="3" fill="#469F85"/>
                                </svg>
                        </button>
                        <div class="flex flex-col gap-4" x-show="open" x-cloak>
                            <button type="button" 
                                @click="section = 'div1'; document.getElementById('div1').scrollIntoView({ behavior: 'smooth' })" 
                                :class="section === 'div1' ? 'text-green font-bold' : 'text-blue font-medium'" 
                                class="flex items-start gap-3 text-base text-left">
                                <div class="mt-0.5 border-[3px] rounded-full size-5 shrink-0" 
                                    :class="section === 'div1' ? 'bg-green border-green' : 'border-purple bg-transparent'">
                                </div>
                                {{.Params.section_prefix}} {{ .Params.section_team}}
                            </button>
                            <button type="button" 
                                @click="section = 'div2'; document.getElementById('div2').scrollIntoView({ behavior: 'smooth' })" 
                                :class="section === 'div2' ? 'text-green font-bold' : 'text-blue font-medium'" 
                                class="flex items-start gap-3 text-base text-left">
                                <div class="mt-0.5 border-[3px] rounded-full size-5 shrink-0" 
                                    :class="section === 'div2' ? 'bg-green border-green' : 'border-purple bg-transparent'">
                                </div>
                                {{.Params.section_prefix}} {{ .Params.section_engagement}}
                            </button>
                            <button type="button" 
                                @click="section = 'div3'; document.getElementById('div3').scrollIntoView({ behavior: 'smooth' })" 
                                :class="section === 'div3' ? 'text-green font-bold' : 'text-blue font-medium'" 
                                class="flex items-start gap-3 text-base text-left">
                                <div class="mt-0.5 border-[3px] rounded-full size-5 shrink-0" 
                                    :class="section === 'div3' ? 'bg-green border-green' : 'border-purple bg-transparent'">
                                </div>
                                {{.Params.section_prefix}} {{ .Params.section_customers}}
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="flex flex-col gap-20 lg:gap-32 w-full">
                <div id="div1" class="scroll-mt-24 scroll-section" x-ref="div1">
                    <div class="flex justify-between items-center gap-5">
                        <h2 id="section_team" class="font-bold text-blue text-3xl sm:text-4xl lg:text-5xl">
                            {{.Params.section_prefix}} <span class="text-sky">{{ .Params.section_team}}</span>
                        </h2>
                    </div>
                    <div class="place-content-center gap-x-6 gap-y-6 sm:gap-y-4 grid sm:grid-cols-3 mt-8 w-full">
                        {{ $data := index .Site.Data .Site.Language.Lang }}
                        {{ range $data.team }}
                        {{if .visible}}
                        <div>
                            <div class="relative">
                                <img class="size-56 object-contain shrink-0" alt=""
                                    src="{{ $teamPlaceholder.RelPermalink }}" />
                                <img class="bottom-5 left-1.5 absolute rounded-full size-44 object-cover shrink-0" alt=""
                                    src="{{ .picture }}" />
                            </div>
                            <div class="text-center">
                                <a href='{{relLangURL .link }}' class="font-bold text-blue text-lg">{{ .firstName }} {{ .lastName}}</a>
                                <p class="font-bold text-purple text-sm">{{ .role }}</p>
                            </div>
                        </div>
                        {{ end }}
                        {{ end }}
                    </div>
                </div>

                <div id="div2" class="scroll-mt-24 scroll-section" x-ref="div2">
                    <h2 id="section_engagement" class="font-bold text-blue text-3xl sm:text-4xl lg:text-5xl">
                        {{.Params.section_prefix}} <span class="text-purple">{{.Params.section_engagement}}</span>
                    </h2>
                    <div class="gap-5 grid md:grid-cols-2 mt-7 md:mt-12 w-full">
                        {{ $data := index .Site.Data .Site.Language.Lang }}
                        {{ range $data.engagements }}
                        {{if .visible}}
                        {{ partial "partials/about-engagemet-2.html" (dict "logo" .logo "title" .title "description" .text "link"
                        .link)}}
                        {{ end }}
                        {{ end }}
                    </div>
                </div>

                <div id="div3" class="scroll-mt-24 scroll-section" x-ref="div3">
                    <h2 id="section_customers" class="font-bold text-blue text-3xl sm:text-4xl lg:text-5xl">
                        {{.Params.section_prefix}} <span class="text-rose">{{.Params.section_customers}}</span>
                    </h2>
                    <div class="relative flex flex-wrap justify-center mt-7 md:mt-12 w-full">
                        {{ $data := index .Site.Data .Site.Language.Lang }}
                        {{ range $data.partners }}
                        {{if .visible}}
                            {{ partial "partials/about-customer.html" (dict "logo" .logo "title" .title "description" .text "link"
                            .link)}}
                        {{ end }}
                        {{ end }}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    function observerSection() {
        return {
            section: '',
            initObserver() {
                const options = {
                    root: null, 
                    rootMargin: "0px",
                    threshold: 0.2, 
                };

                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            this.section = entry.target.id; 
                            console.log(this.section);
                        }
                    });
                }, options);

                document.querySelectorAll('.scroll-section').forEach(section => {
                    observer.observe(section);
                });
            }
        }
    }
</script>
{{ end }}
